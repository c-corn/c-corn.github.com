<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>CoRN.model.metric2.LinfDistMonad</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab720"></a><h2 class="section">Completion distributes over Step Functions</h2>

We prove the that StepF distributes over Complete using the function 
swap (which we call dist) as in Jones, Duponcheel - composing monads

</div>
<div class="code">

<br/>

<br/>
<span class="id" type="keyword">Section</span> <span class="id" type="section"><a name="Dist">Dist</a></span>.<br/>
<span class="id" type="keyword">Variable</span> <span class="id" type="variable"><a name="Dist.X">X</a></span>: <span class="id" type="record"><a class="idref" href="CoRN.metric2.Metric.html#MetricSpace">MetricSpace</a></span>.<br/>
</div>

<div class="doc">
The dist function exchanges StepF (under the infinity metric) and Complete monads 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="definition"><a name="dist_raw">dist_raw</a></span> (<span class="id" type="var">x</span>:StepFSup (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Complete">Complete</a></span> <span class="id" type="var">X</span>)) (<span class="id" type="var">e</span>:QposInf): (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#StepFSup">StepFSup</a></span> <span class="id" type="var">X</span>):=<br/>
(<span class="id" type="definition"><a class="idref" href="CoRN.metric2.StepFunction.html#Map">Map</a></span> (<span class="id" type="keyword">fun</span> <span class="id" type="var">z</span>=&gt; <span class="id" type="projection"><a class="idref" href="CoRN.metric2.Complete.html#approximate">approximate</a></span> <span class="id" type="var">z</span> <span class="id" type="var">e</span>) <span class="id" type="var">x</span>).<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <span class="id" type="lemma"><a name="dist_prf">dist_prf</a></span> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">x</span>:StepFSup (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Complete">Complete</a></span> <span class="id" type="var">X</span>)),<br/>
&nbsp;<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#is_RegularFunction">is_RegularFunction</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist_raw">dist_raw</a></span> <span class="id" type="var">x</span>).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="definition"><a name="dist1">dist1</a></span> (<span class="id" type="var">x</span>:StepFSup (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Complete">Complete</a></span> <span class="id" type="var">X</span>)): (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Complete">Complete</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#StepFSup">StepFSup</a></span> <span class="id" type="var">X</span>)).<br/>
<br/>
<span class="id" type="keyword">Defined</span>.<br/>

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist1">dist1</a></span> <span class="id" type="keyword">with</span> <span class="id" type="var">signature</span> (@<span class="id" type="projection"><a class="idref" href="CoRN.algebra.RSetoid.html#st_eq">st_eq</a></span> <span class="id" type="var">_</span>)<br/>
&nbsp;==&gt; (@<span class="id" type="projection"><a class="idref" href="CoRN.algebra.RSetoid.html#st_eq">st_eq</a></span> <span class="id" type="var">_</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">dist1_wd</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <span class="id" type="lemma"><a name="dist1_uc">dist1_uc</a></span> : <span class="id" type="definition"><a class="idref" href="CoRN.metric2.UniformContinuity.html#is_UniformlyContinuousFunction">is_UniformlyContinuousFunction</a></span> <span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist1">dist1</a></span> <span class="id" type="constructor"><a class="idref" href="CoRN.model.structures.QposInf.html#Qpos2QposInf">Qpos2QposInf</a></span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="definition"><a name="dist">dist</a></span>: (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#StepFSup">StepFSup</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Complete">Complete</a></span> <span class="id" type="var">X</span>))--&gt;(Complete (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#StepFSup">StepFSup</a></span> <span class="id" type="var">X</span>)).<br/>
<span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">End</span> <span class="id" type="section"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#Dist">Dist</a></span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Definition</span> <span class="id" type="definition"><a name="distconst">distconst</a></span>(<span class="id" type="var">X</span> : <span class="id" type="record"><a class="idref" href="CoRN.metric2.Metric.html#MetricSpace">MetricSpace</a></span>):(Complete <span class="id" type="var">X</span>)-&gt;Complete (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#StepFSup">StepFSup</a></span> <span class="id" type="var">X</span>).<br/>
<br/>
<span class="id" type="keyword">Defined</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <span class="id" type="lemma"><a name="distConst">distConst</a></span>(<span class="id" type="var">X</span> : <span class="id" type="record"><a class="idref" href="CoRN.metric2.Metric.html#MetricSpace">MetricSpace</a></span>):forall (<span class="id" type="var">x</span>:Complete <span class="id" type="var">X</span>),<br/>
(<span class="id" type="projection"><a class="idref" href="CoRN.algebra.RSetoid.html#st_eq">st_eq</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist">dist</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.StepFunctionSetoid.html#constStepF">constStepF</a></span> <span class="id" type="var">x</span>)) (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#distconst">distconst</a></span> <span class="id" type="var">x</span>)).<br/>
<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <span class="id" type="lemma"><a name="dist_glue">dist_glue</a></span>(<span class="id" type="var">X</span>:MetricSpace)(o:OpenUnit): <span class="id" type="keyword">forall</span> (<span class="id" type="var">x</span> <span class="id" type="var">y</span>:(StepFSup (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Complete">Complete</a></span> <span class="id" type="var">X</span>))),<br/>
(<span class="id" type="projection"><a class="idref" href="CoRN.algebra.RSetoid.html#st_eq">st_eq</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist">dist</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.StepFunctionSetoid.html#glue">glue</a></span> <span class="id" type="var">o</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>))  (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Cmap2_slow">Cmap2_slow</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#glue_uc">glue_uc</a></span> <span class="id" type="var">_</span> <span class="id" type="var">o</span>) (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist">dist</a></span> <span class="id" type="var">x</span>) (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist">dist</a></span> <span class="id" type="var">y</span>))).<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

<br/>
<span class="id" type="keyword">Section</span> <span class="id" type="section"><a name="DistributionLaws">DistributionLaws</a></span>.<br/>
</div>

<div class="doc">
Now we show the laws for dist are satified, except for the last one
which we have not completed yet. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Let</span> <span class="id" type="definition"><a name="prod">prod</a></span>(<span class="id" type="var">X</span>:MetricSpace):= (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.UniformContinuity.html#uc_compose">uc_compose</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Cmap_slow">Cmap_slow</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#StFJoinSup">StFJoinSup</a></span> <span class="id" type="var">X</span>))<br/>
&nbsp;&nbsp;(@<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist">dist</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#StepFSup">StepFSup</a></span> <span class="id" type="var">X</span>))).<br/>

<br/>
<span class="id" type="keyword">Let</span> <span class="id" type="definition"><a name="dorp">dorp</a></span>(<span class="id" type="var">X</span>:MetricSpace):= (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.UniformContinuity.html#uc_compose">uc_compose</a></span> <span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Cjoin">Cjoin</a></span><br/>
&nbsp;&nbsp;(<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Cmap_slow">Cmap_slow</a></span> (@<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist">dist</a></span> <span class="id" type="var">X</span>))).<br/>

<br/>
&nbsp;<span class="id" type="keyword">Lemma</span> <span class="id" type="lemma"><a name="distmapmap">distmapmap</a></span>: <span class="id" type="keyword">forall</span> <span class="id" type="var">X</span> <span class="id" type="var">Y</span> (<span class="id" type="var">f</span> : <span class="id" type="definition"><a class="idref" href="CoRN.metric2.UniformContinuity.html#UniformlyContinuousSpace">UniformlyContinuousSpace</a></span> <span class="id" type="var">X</span> <span class="id" type="var">Y</span>), (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.UniformContinuity.html#ucEq">ucEq</a></span><br/>
(<span class="id" type="definition"><a class="idref" href="CoRN.metric2.UniformContinuity.html#uc_compose">uc_compose</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist">dist</a></span>) (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#Map_uc">Map_uc</a></span> (@<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Cmap_slow">Cmap_slow</a></span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span>)))<br/>
(<span class="id" type="definition"><a class="idref" href="CoRN.metric2.UniformContinuity.html#uc_compose">uc_compose</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Cmap_slow">Cmap_slow</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#Map_uc">Map_uc</a></span> <span class="id" type="var">f</span>)) (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist">dist</a></span>))).<br/>
<br/>
<br/>
<br/>
<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <span class="id" type="lemma"><a name="distreturn">distreturn</a></span>: <span class="id" type="keyword">forall</span> <span class="id" type="var">X</span>,<br/>
(<span class="id" type="definition"><a class="idref" href="CoRN.metric2.UniformContinuity.html#ucEq">ucEq</a></span><br/>
(<span class="id" type="definition"><a class="idref" href="CoRN.metric2.UniformContinuity.html#uc_compose">uc_compose</a></span> <span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist">dist</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#StFReturn_uc">StFReturn_uc</a></span> <span class="id" type="var">_</span>))<br/>
(@<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Cmap_slow">Cmap_slow</a></span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#StFReturn_uc">StFReturn_uc</a></span> <span class="id" type="var">X</span>))).<br/>
<br/>
<br/>
<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <span class="id" type="lemma"><a name="distmapret">distmapret</a></span>: <span class="id" type="keyword">forall</span> <span class="id" type="var">X</span>, (<span class="id" type="definition"><a class="idref" href="CoRN.metric2.UniformContinuity.html#ucEq">ucEq</a></span><br/>
(<span class="id" type="definition"><a class="idref" href="CoRN.metric2.UniformContinuity.html#uc_compose">uc_compose</a></span> <span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#dist">dist</a></span><br/>
(@<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#Map_uc">Map_uc</a></span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> (@<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Cunit">Cunit</a></span> <span class="id" type="var">X</span>))) <br/>
(@<span class="id" type="definition"><a class="idref" href="CoRN.metric2.Complete.html#Cunit">Cunit</a></span> (<span class="id" type="definition"><a class="idref" href="CoRN.model.metric2.LinfMetricMonad.html#StepFSup">StepFSup</a></span> <span class="id" type="var">X</span>))).<br/>
<br/>

<br/>

<br/>
<span class="id" type="keyword">End</span> <span class="id" type="section"><a class="idref" href="CoRN.model.metric2.LinfDistMonad.html#DistributionLaws">DistributionLaws</a></span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr">coqdoc</a>
</div>

</div>

</body>
</html>